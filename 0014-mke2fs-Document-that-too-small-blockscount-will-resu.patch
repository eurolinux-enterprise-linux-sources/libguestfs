From 0d82913df05944a3497003d370c762cb274cc2b3 Mon Sep 17 00:00:00 2001
From: Richard W.M. Jones <rjones@redhat.com>
Date: Thu, 29 Aug 2013 13:59:14 +0100
Subject: [PATCH 14/31] mke2fs: Document that too small blockscount will result in ext2 filesystem (RHBZ#1002032).
 (cherry picked from commit 1c8986e45c3f1a7e2391bde2848667332495e3aa)

---
 generator/actions.ml |   10 +++++++---
 1 files changed, 7 insertions(+), 3 deletions(-)

diff --git a/generator/actions.ml b/generator/actions.ml
index d86413b..040b38f 100644
--- a/generator/actions.ml
+++ b/generator/actions.ml
@@ -10327,11 +10327,15 @@ or C<guestfs_rm_rf> to remove directories recursively." };
             ["cat"; "/new"]], "new file contents")
        ]);
     shortdesc = "create an ext2/ext3/ext4 filesystem on device";
+    (* XXX document optional args properly *)
     longdesc = "\
 C<mke2fs> is used to create an ext2, ext3, or ext4 filesystem
-on C<device>.  The optional C<blockscount> is the size of the
-filesystem in blocks.  If omitted it defaults to the size of
-C<device>." (* XXX document optional args properly *) };
+on C<device>.
+
+The optional C<blockscount> is the size of the filesystem in blocks.
+If omitted it defaults to the size of C<device>.  Note if the
+filesystem is too small to contain a journal, C<mke2fs> will
+silently create an ext2 filesystem instead." };
 
   { defaults with
     name = "list_disk_labels";
-- 
1.7.1

